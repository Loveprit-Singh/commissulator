<%= form_with(model: commission, local: true) do |form| %>
  <% if commission.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(commission.errors.count, "error") %> prohibited this commission from being saved:</h2>

      <ul>
      <% commission.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="commission_form_row">
    <%= form.label :branch_name %>
    <%= form.text_field :branch_name %>
    
    <%= form.label :request_date %>
    <%= form.date_select :request_date %>
    
    <%= form.label :intranet_deal_number %>
    <%= form.number_field :intranet_deal_number, :disabled => true %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :agent_name %>
    <%= form.text_field :agent_name %>
    
    <%= form.label :agent_split_percentage %>
    <%= form.text_field :agent_split_percentage %>
    
    <%= form.label :copy_of_lease %>
    <%= form.check_box :copy_of_lease %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :property_address %>
    <%= form.text_field :property_address %>
    
    <%= form.label :apartment_number %>
    <%= form.text_field :apartment_number %>
    
    <%= form.label :zip_code %>
    <%= form.text_field :zip_code %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :bedrooms %>
    <%= form.text_field :bedrooms %>
    
    <%= form.label :square_footage %>
    <%= form.number_field :square_footage %>
    
    <%= form.label :property_type %>
    <%= form.text_field :property_type %>
    
    <%= form.label :new_development %>
    <%= form.check_box :new_development %>
  </div>
  <div id="tenant_info_area">
    <div class="commission_form_row">
      <%= form.label :tenant_name %>
      <%= text_field_tag :'commission[tenant_name][]', commission.tenant_name&.first %>
    
      <%= form.label :tenant_email %>
      <%= text_field_tag :'commission[tenant_email][]', commission.tenant_email&.first %>
    
      <%= form.label :tenant_phone_number %>
      <%= text_field_tag :'commission[tenant_phone_number][]', commission.tenant_phone_number&.first %>
    </div>
  
    <div class="commission_form_row">
      <%= form.label :tenant_name %>
      <%= text_field_tag :'commission[tenant_name][]', commission.tenant_name&.second %>
    
      <%= form.label :tenant_email %>
      <%= text_field_tag :'commission[tenant_email][]', commission.tenant_email&.second %>
    
      <%= form.label :tenant_phone_number %>
      <%= text_field_tag :'commission[tenant_phone_number][]', commission.tenant_phone_number&.second %>
    </div>
    <%= link_to 'Add a Tenant', add_tenant_to_commission_path(commission), :remote => true, :id => 'tenant_add_link' %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :landlord_name %>
    <%= form.text_field :landlord_name %>
    
    <%= form.label :landlord_email %>
    <%= form.email_field :landlord_email %>
    
    <%= form.label :landlord_phone_number %>
    <%= form.text_field :landlord_phone_number %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :lease_sign_date %>
    <%= form.date_select :lease_sign_date %>
    
    <%= form.label :lease_start_date %>
    <%= form.date_select :lease_start_date %>
    
    <%= form.label :lease_term_date %>
    <%= form.date_select :lease_term_date %>
    
    <%= form.label :approval_date %>
    <%= form.date_select :approval_date %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :listed_monthly_rent %>
    <%= form.number_field :listed_monthly_rent %>
    
    <%= form.label :leased_monthly_rent %>
    <%= form.number_field :leased_monthly_rent %>
    
    <%= form.label :annualized_rent %>
    <%= form.number_field :annualized_rent %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :commission_fee_percentage %>
    <%= form.text_field :commission_fee_percentage %>
    
    <%= form.label :total_commission %>
    <%= form.text_field :total_commission %>
    
    <%= form.label :citi_commission %>
    <%= form.text_field :citi_commission %>
    
    <%= form.label :co_broke_commission %>
    <%= form.text_field :co_broke_commission %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :owner_pay_commission %>
    <%= form.text_field :owner_pay_commission %>
    
    <%= form.label :listing_side_commission %>
    <%= form.text_field :listing_side_commission %>
    
    <%= form.label :tenant_side_commission %>
    <%= form.text_field :tenant_side_commission %>
  </div>
  
  <div class="commission_form_row">
    <%= form.label :reason_for_fee_reduction %>
    <%= form.text_field :reason_for_fee_reduction %>
    
    <%= form.label :landlord_source %>
    <%= form.text_field :landlord_source %>
    
    <%= form.label :tenant_source %>
    <%= form.text_field :tenant_source %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
